---
title: 绿色守护社区特性
---

# 关于“处方”

绿色守护中的“处方”，是一种针对任何Android应用中不受欢迎行为的精确定向屏蔽。它被社区成员以完全开放的规则形式发布在GitHub上，之后即可由任何用户导入自己设备上安装的绿色守护中。欢迎所有拥有相关经验的高级用户（尤其是开发者）自己编写、发布和传播处方，为Android应用生态带来带来更好的风貌，形成一股可以影响和鼓励应用开发者提升应用设备体验的力量。这也是绿色守护的初衷。

“处方”特性要求绿色守护工作在ROOT模式，或Android 4.4~5.x的非ROOT模式。

# 处方能做什么

处方可以屏蔽Android应用中各种不受欢迎的行为，并且仍在持续进化，在未来短期内还将获得更多的能力。

* 由Android广播机制触发的行为
* 服务的启动和绑定（调用）行为
* 界面的启动行为

出于安全原因，所有的处方**目前仅能作用于跨用户应用的行为，不包括从Android系统和系统内特权应用触发的行为**。这项限制将在不久后取消，并提供细化的行为方向限定。

# 如何写处方

处方以XML格式书写，以格式版本（由`xmlns`定义，见下例）的方式保证兼容性。较新的内容格式版本通常需要较新版本的绿色守护支持。

目前，绿色守护支持以下两种类型的处方：

## 处方单 —— 一条具有具体规则内容的处方

编写一条处方单需要对Android开发的初步知识和对应用行为底层的深入分析，因为处方单是基于Android中负责应用间（及应用内）行为和通信的基础协议 —— “意图”（`intent`）机制屏蔽特定的行为。

例如：<https://github.com/greenify/rx-mipush>

```xml
<prescription xmlns="http://greenify.github.io/schemas/prescription/v1" type="service">
  <intent-filter>
    <action name="com.xiaomi.mipush.sdk.WAKEUP" />
  </intent-filter>
</prescription>
```

这是一条简单的处方单，包含仅仅一个用于识别所屏蔽行为的“意图筛选器”（`intent-filter`）。类型属性`type="service"`表明它处理的是“服务”行为。（其它目前支持的类型还有“广播”（`broadcast`）和“界面”（`activity`）。

一条处方单可以包含单项或多项“意图筛选器”（`intent-filter`）。如果其中的任何一项匹配，行为就会被屏蔽。复杂的处方单还可以将“意图”匹配的范围限定于特定的应用或应用中的特定组件（通过`<prescription>`标签的`package`和`class`属性）。（例如：<https://github.com/greenify/rx-baidu-sso/>） 如果两个属性同时使用，则允许完全略去“意图筛选器”，从而对一个组件进行无条件屏蔽。
